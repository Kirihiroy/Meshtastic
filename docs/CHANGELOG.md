# Журнал изменений

Все заметные изменения в проекте документируются в этом файле.

Формат основан на [Keep a Changelog](https://keepachangelog.com/ru/1.0.0/),
и проект следует [Semantic Versioning](https://semver.org/lang/ru/).

---

## [Unreleased]

### Планируется
- Автоматический reconnect при потере соединения
- Отображение RSSI и MTU в статусе
- Подтверждения применения настроек от устройства
- Экран чата с историей сообщений
- Экран карты с визуализацией узлов

---

## [0.1.0] - 2026-02-04

### Added (Добавлено)

#### Основная функциональность
- BLE сканирование устройств Meshtastic
- Подключение к устройству по BLE
- Мониторинг состояния соединения
- Отображение списка узлов сети
- Настройка канала и PSK
- Локальное сохранение черновика настроек

#### UI компоненты
- `ConnectionFragment` — управление подключением
- `StatusFragment` — панель состояния и телеметрия
- `NodesFragment` — список узлов сети
- `SettingsFragment` — конфигурация
- Bottom Navigation для переключения между экранами

#### Bluetooth Layer
- `BleManager` — управление BLE транспортом
- GATT операции через очередь
- Drain loop для FromRadio
- Автоматическое MTU negotiation
- Poll fallback для FromNum уведомлений

#### Repository Layer
- `MeshConnectionRepository` — централизация состояния
- LiveData для реактивного обновления UI
- Обработка FromRadio пакетов
- Парсинг protobuf сообщений

#### Data Models
- `DeviceStatus` — агрегированное состояние устройства
- `NodeInfo` — информация об узлах
- `SettingsDraft` — черновик настроек

#### Storage
- `SettingsStore` — хранение черновика в SharedPreferences

#### Протокол
- Поддержка FromRadio типов: MY_INFO, NODE_INFO, CONFIG, CHANNEL, PACKET, METADATA
- Отправка ToRadio команд
- Admin пакеты для настройки канала/PSK

#### Документация
- `SETUP.md` — установка и настройка окружения
- `USAGE.md` — руководство пользователя
- `ARCHITECTURE.md` — описание архитектуры
- `CONFIGURATION.md` — настройка сети и безопасности
- `TROUBLESHOOTING.md` — устранение неполадок
- `FEATURES.md` — список функций и roadmap
- `FAQ.md` — часто задаваемые вопросы
- `GLOSSARY.md` — глоссарий терминов

### Changed (Изменено)
- Переработан layout `fragment_settings.xml` — отключена анимация hint, добавлены статические заголовки над полями
- Улучшена обработка ошибок в BLE подключении
- Оптимизирована очередь GATT операций

### Fixed (Исправлено)
- Дублирование TextViews в `fragment_status.xml`
- Таймауты GATT операций
- Race conditions в drain loop

### Security (Безопасность)
- PSK хранится локально в SharedPreferences
- Нет передачи данных в интернет
- Отсутствие аналитики и трекинга

---

## [0.0.1] - 2026-01-15

### Added (Добавлено)
- Начальная структура проекта
- Базовая настройка Gradle
- Protobuf схемы Meshtastic
- Зависимости (protobuf-javalite, material, lifecycle)

---

## Соглашения о формате

### Типы изменений

- **Added** — новые функции
- **Changed** — изменения в существующей функциональности
- **Deprecated** — функции, которые скоро будут удалены
- **Removed** — удалённые функции
- **Fixed** — исправления ошибок
- **Security** — изменения безопасности

### Версионирование

Формат: `MAJOR.MINOR.PATCH`

- **MAJOR** — несовместимые изменения API
- **MINOR** — обратно совместимые новые функции
- **PATCH** — обратно совместимые исправления

Примеры:
- `0.1.0` — первая MVP версия
- `0.2.0` — добавлен чат (новая функция)
- `0.2.1` — исправлена ошибка в чате (bugfix)
- `1.0.0` — стабильный релиз

---

## История релизов

| Версия | Дата | Основные изменения |
|--------|------|-------------------|
| 0.1.0 | 2026-02-04 | MVP: BLE подключение, статус, узлы, настройки |
| 0.0.1 | 2026-01-15 | Инициализация проекта |

---

## Планируемые релизы

### v0.2.0 (Q2 2026)
- Экран чата
- Отправка/получение текстовых сообщений
- История сообщений (Room DB)
- Уведомления о новых сообщениях

### v0.3.0 (Q3 2026)
- Экран карты (MapLibre/OsmDroid)
- Отображение узлов на карте
- GPS интеграция
- Отправка позиции

### v0.4.0 (Q4 2026)
- Foreground Service для фонового режима
- Автоматический reconnect
- Admin команды (reboot, factory reset)
- Firmware update

### v1.0.0 (Q1 2027)
- Полная поддержка протокола Meshtastic
- Многоканальность
- Offline режим
- Стабильный релиз

---

## Ссылки

- [GitHub Releases](https://github.com/YOUR_REPO/releases)
- [Milestones](https://github.com/YOUR_REPO/milestones)
- [Issues](https://github.com/YOUR_REPO/issues)

