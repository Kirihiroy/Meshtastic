# Часто задаваемые вопросы (FAQ)

## Общие вопросы

### Что такое Meshtastic?

Meshtastic — это открытый проект для создания дальнобойных mesh-сетей с использованием недорогих LoRa радиомодулей. Устройства могут общаться друг с другом на расстоянии до нескольких километров без интернета или сотовой связи.

### Зачем нужно это приложение?

Это альтернативный Android клиент для управления и мониторинга устройств Meshtastic. Приложение позволяет:
- Подключаться к устройствам по BLE
- Видеть список узлов в сети
- Настраивать каналы и безопасность
- Мониторить состояние устройства

---

## Подключение и BLE

### Почему не отображается статус подключенного устройства?

**Причины:**
1. BLE подключение установлено, но данные не приходят
2. FromRadio пакеты не читаются (drain loop не работает)
3. Устройство не отправляет данные

**Решение:**
1. Откройте вкладку "Подключение" → нажмите "Отправить тест (ping)"
2. Проверьте поле "Последние входящие байты" — должны появиться hex данные
3. Если нет — переподключитесь

### Почему приложение постоянно запрашивает разрешения?

Android может сбрасывать разрешения при обновлениях или длительном неиспользовании.

**Решение:**
```powershell
# Предоставьте разрешения через ADB (постоянно)
adb shell pm grant com.example.meshtastic android.permission.BLUETOOTH_SCAN
adb shell pm grant com.example.meshtastic android.permission.BLUETOOTH_CONNECT
adb shell pm grant com.example.meshtastic android.permission.ACCESS_FINE_LOCATION
```

### Можно ли подключиться к нескольким устройствам одновременно?

Нет, текущая версия поддерживает только одно BLE подключение. Для переключения между устройствами:
1. Отключитесь от текущего
2. Найдите новое устройство
3. Подключитесь

### Почему нужно разрешение на геолокацию для BLE?

Android требует это разрешение для сканирования BLE устройств, т.к. BLE может использоваться для определения местоположения (beacon'ы в магазинах и т.п.).

**Важно:** Приложение **не использует** GPS для BLE — это требование Android OS.

---

## Настройки

### Почему настройки не применяются?

**Чек-лист:**
- [ ] Устройство подключено (статус "CONNECTED")
- [ ] Имя канала заполнено
- [ ] PSK заполнен (16 или 32 символа)
- [ ] После применения прошло 10-15 секунд
- [ ] Устройство перезагружено

**Типичные ошибки:**
```
✗ PSK: "123" → слишком короткий
✓ PSK: "MySecretKey12345" → ровно 16 символов

✗ Имя канала: "My Team" → пробел запрещён
✓ Имя канала: "My-Team" → дефис разрешён
```

### Что делать, если забыл PSK?

PSK хранится только локально и не передаётся обратно с устройства.

**Варианты:**
1. Проверьте черновик в приложении (вкладка "Настройки")
2. Если забыли — требуется **factory reset** устройства Meshtastic
3. После reset PSK сброситься на default (0x01)

### Как узнать текущий PSK устройства?

Никак. PSK не передаётся по соображениям безопасности.

**Best practice:** Всегда записывайте PSK в надёжном месте (password manager).

### Можно ли применить настройки на несколько устройств сразу?

Нет автоматической массовой настройки, но можно:
1. Сохраните черновик с нужными настройками
2. Подключайтесь к каждому устройству по очереди
3. Применяйте черновик кнопкой "Применить на устройство"

---

## Устройства и совместимость

### Какие устройства Meshtastic поддерживаются?

Все устройства с прошивкой **Meshtastic 2.0+** и включённым BLE:
- Heltec LoRa 32 V2/V3
- TTGO T-Beam
- TTGO T-Echo
- RAK WisBlock
- LilyGo LoRa32
- Station G1/G2
- И другие (см. [официальный список](https://meshtastic.org/docs/hardware))

### Можно ли использовать эмулятор Android?

Технически да, но **не рекомендуется**:
- BLE в эмуляторе работает нестабильно
- Нет физического радиуса действия
- Невозможно тестировать real-world сценарии

**Рекомендация:** Используйте физическое устройство Android 7.0+.

### Какая минимальная версия Android?

- **Минимум:** Android 7.0 (API 24)
- **Рекомендуется:** Android 10+ (API 29+)
- **Оптимально:** Android 12+ (API 31+) — новые BLE разрешения

### Работает ли приложение на iOS?

Нет, это Android приложение. Для iOS используйте [официальное приложение Meshtastic](https://apps.apple.com/app/meshtastic/id1586432531).

---

## Troubleshooting

### Что делать при отсутствии JAVA_HOME?

JAVA_HOME требуется только для сборки из исходников.

**Решение:**
1. Установите JDK 11 от [Azul Zulu](https://www.azul.com/downloads/?package=jdk)
2. Задайте переменную окружения:
```powershell
# Windows
$env:JAVA_HOME = "C:\Program Files\Java\jdk-11"
[System.Environment]::SetEnvironmentVariable("JAVA_HOME", "C:\Program Files\Java\jdk-11", "User")

# macOS/Linux
export JAVA_HOME=$(/usr/libexec/java_home -v 11)
```
3. Перезапустите PowerShell/Terminal
4. Проверьте: `java -version`

### Приложение вылетает при запуске

**Причины:**
1. Нет разрешений
2. Crash в BleManager
3. Protobuf несовместимость

**Диагностика:**
```powershell
adb logcat | Select-String "FATAL"
```

**Решение:**
1. Переустановите приложение
2. Очистите кэш: `adb shell pm clear com.example.meshtastic`
3. Проверьте логи и создайте issue на GitHub

### "Connection timed out" при подключении

**Причины:**
- Устройство выключено
- Слишком далеко
- Занято другим подключением
- BLE перегружен

**Решение:**
1. Проверьте, что устройство включено (LED индикатор)
2. Подойдите ближе (< 5 метров)
3. Отключите другие BLE клиенты
4. Перезагрузите Bluetooth на телефоне
5. Перезагрузите устройство Meshtastic

---

## Функциональность

### Можно ли отправлять текстовые сообщения?

В текущей версии (v0.1) — **нет**. Планируется в версии 0.2.

**Workaround:** Используйте официальное приложение Meshtastic для чата.

### Есть ли карта для визуализации узлов?

Нет в текущей версии. Планируется в версии 0.3.

### Можно ли использовать приложение без интернета?

Да, приложение работает полностью offline:
- BLE не требует интернета
- Все данные локальные
- Нет cloud sync

**Примечание:** Для установки из Google Play нужен интернет, но после установки можно работать офлайн.

### Поддерживается ли MQTT?

Нет в текущей версии. MQTT мост не планируется в ближайших релизах.

---

## Безопасность и приватность

### Безопасно ли приложение?

Да:
- PSK хранится локально в SharedPreferences
- Нет передачи данных в интернет
- Нет аналитики или трекинга
- Open source (можно проверить код)

**Рекомендации:**
- Используйте сильный PSK (16+ символов)
- Не передавайте PSK через незащищённые каналы
- Регулярно меняйте PSK

### Какие данные собирает приложение?

**Никаких!** Приложение:
- Не отправляет данные в интернет
- Не использует аналитику (Google Analytics, Firebase)
- Не собирает личную информацию
- Не требует аккаунтов

Все данные хранятся локально на устройстве.

### Можно ли использовать приложение для конфиденциальной связи?

Да, если:
1. Используете сильный PSK (32 символа, AES-256)
2. Меняете PSK регулярно
3. Используете уникальный канал для группы
4. Не передаёте PSK небезопасными каналами

**Важно:** Меsh-сети по определению не анонимны (NodeID виден всем).

---

## Производительность

### Как долго держится батарея телефона?

Зависит от использования:
- **Активное использование** (экран включён): 4-6 часов
- **Фоновый режим** (планируется): 8-12 часов
- **Периодическая проверка**: 1-2% в час

**Совет:** Отключайте BLE, когда не используете приложение.

### Влияет ли приложение на скорость передачи данных?

BLE имеет ограничения:
- Максимум ~1 Mbit/s
- Реально ~100-300 Kbit/s
- Для Meshtastic достаточно (протокол медленный по дизайну)

### Можно ли использовать приложение в фоновом режиме?

В текущей версии — **ограниченно**:
- Android может убить процесс в фоне
- BLE подключение может разорваться
- Нет Foreground Service

**Планируется:** Foreground Service в версии 0.4.

---

## Разработка и вклад

### Можно ли помочь с разработкой?

Да! Проект open source:
1. Fork репозитория на GitHub
2. Создайте feature branch
3. Внесите изменения
4. Отправьте Pull Request

**Что нужно:**
- Java/Kotlin знания
- Android SDK опыт
- Понимание BLE (желательно)

### Где исходный код?

GitHub: [ссылка на репозиторий]

### Как сообщить об ошибке?

1. Соберите информацию:
   - Модель телефона и версия Android
   - Модель устройства Meshtastic и версия прошивки
   - Шаги для воспроизведения
   - Логи (`adb logcat`)

2. Создайте issue на GitHub с тегом "bug"

3. Приложите скриншоты (если возможно)

---

## Сравнение с другими приложениями

### Чем отличается от официального приложения?

| Параметр | Официальное | Этот проект |
|----------|-------------|-------------|
| Открытый код | ✓ | ✓ |
| BLE | ✓ | ✓ |
| Serial (USB) | ✓ | ✗ |
| Чат | ✓ | Планируется |
| Карта | ✓ | Планируется |
| Простота UI | Средняя | Высокая (MVP) |
| Размер APK | ~30 MB | ~10 MB |

### Почему создан отдельный проект?

Цели:
- Образовательный проект (изучение BLE, Protobuf, Android)
- Минималистичный UI (фокус на важном)
- Экспериментальные функции
- Альтернатива для пользователей с ограничениями (старые устройства)

---

## Другое

### Будет ли приложение в Google Play?

Возможно в будущем. Пока только APK из GitHub Releases.

### Поддерживаются ли другие языки (кроме русского/английского)?

Пока только русский интерфейс. Локализация планируется после стабилизации API.

### Можно ли использовать приложение коммерчески?

Да, проект под [лицензией] (проверьте LICENSE файл).

### Есть ли документация по API?

Да, см. `docs/ARCHITECTURE.md` для внутреннего API.

Для протокола Meshtastic см. [официальную документацию](https://meshtastic.org/docs/developers/protobuffs).

---

## Не нашли ответ?

1. Проверьте `TROUBLESHOOTING.md`
2. Поищите в существующих issues на GitHub
3. Создайте новый issue с вопросом
4. Присоединяйтесь к [Meshtastic Discord](https://discord.gg/meshtastic)

